!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("isomorphic-unfetch")):"function"==typeof define&&define.amd?define(["isomorphic-unfetch"],e):(t||self).cyberStreamSdk=e(t.isomorphicUnfetch)}(this,function(t){function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=/*#__PURE__*/e(t);function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}var i=/*#__PURE__*/function(){function t(){this.baseUrl="https://search.imdbot.workers.dev/"}return t.prototype.request=function(t,e){try{var r=""+this.baseUrl+t,o=Object.assign({},e,{"Content-Type":"application/json"});return Promise.resolve(n.default(r,o)).then(function(t){var e;function n(n){if(e)return n;throw new Error(t.statusText)}var r=function(){if(t.ok)return Promise.resolve(t.json()).then(function(t){return e=1,t})}();return r&&r.then?r.then(n):n(r)})}catch(t){return Promise.reject(t)}},t}();function u(t,e,n){if(!t.s){if(n instanceof c){if(!n.s)return void(n.o=u.bind(null,t,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)return void n.then(u.bind(null,t,e),u.bind(null,t,2));t.s=e,t.v=n;const r=t.o;r&&r(t)}}var c=/*#__PURE__*/function(){function t(){}return t.prototype.then=function(e,n){var r=new t,o=this.s;if(o){var i=1&o?e:n;if(i){try{u(r,1,i(this.v))}catch(t){u(r,2,t)}return r}return this}return this.o=function(t){try{var o=t.v;1&t.s?u(r,1,e?e(o):o):n?u(r,1,n(o)):u(r,2,o)}catch(t){u(r,2,t)}},r},t}();function f(t){return t instanceof c&&1&t.s}var s,h=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getRandomMovies=function(){try{var t,e=function(){return Array.from(r.values()).slice(0,10)},n=this,r=new Map,o=function(t,e,n){for(var r;;){var o=t();if(f(o)&&(o=o.v),!o)return i;if(o.then){r=0;break}var i=n();if(i&&i.then){if(!f(i)){r=1;break}i=i.s}if(e){var s=e();if(s&&s.then&&!f(s)){r=2;break}}}var h=new c,a=u.bind(null,h,2);return(0===r?o.then(p):1===r?i.then(v):s.then(d)).then(void 0,a),h;function v(r){i=r;do{if(e&&(s=e())&&s.then&&!f(s))return void s.then(d).then(void 0,a);if(!(o=t())||f(o)&&!o.v)return void u(h,1,i);if(o.then)return void o.then(p).then(void 0,a);f(i=n())&&(i=i.v)}while(!i||!i.then);i.then(v).then(void 0,a)}function p(t){t?(i=n())&&i.then?i.then(v).then(void 0,a):v(i):u(h,1,i)}function d(){(o=t())?o.then?o.then(p).then(void 0,a):p(o):u(h,1,i)}}(function(){return!t&&r.size<10},void 0,function(){return Promise.resolve(n.request()).then(function(e){var n=e.description;n.forEach(function(t){r.has(t["#IMDB_ID"])||r.set(t["#IMDB_ID"],t)}),n.length<10&&(t=1)})});return Promise.resolve(o&&o.then?o.then(e):e())}catch(t){return Promise.reject(t)}},n.getMovieById=function(t){try{return Promise.resolve(this.request("?tt="+t))}catch(t){return Promise.reject(t)}},n.searchMovies=function(t){try{return Promise.resolve(this.request("q="+encodeURIComponent(t))).then(function(t){return t.description})}catch(t){return Promise.reject(t)}},e}(i),a=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(i);return s=a,[h].forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(e){Object.defineProperty(s.prototype,e,Object.getOwnPropertyDescriptor(t.prototype,e))})}),a});
