import t from"isomorphic-unfetch";class e{constructor(){this.baseUrl="https://search.imdbot.workers.dev/"}async request(e,r){const s=`${this.baseUrl}${e}`,o=Object.assign({},r,{"Content-Type":"application/json"}),a=await t(s,o);if(a.ok)return await a.json();throw new Error(a.statusText)}}class r extends e{}var s;s=r,[class extends e{async getRandomMovies(){let t=new Map;for(;t.size<10;){const{description:e}=await this.request();if(e.forEach(e=>{t.has(e["#IMDB_ID"])||t.set(e["#IMDB_ID"],e)}),e.length<10)break}return Array.from(t.values()).slice(0,10)}async getMovieById(t){return await this.request(`?tt=${t}`)}async searchMovies(t){const{description:e}=await this.request(`q=${encodeURIComponent(t)}`);return e}}].forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(e=>{Object.defineProperty(s.prototype,e,Object.getOwnPropertyDescriptor(t.prototype,e))})});export{r as default};
